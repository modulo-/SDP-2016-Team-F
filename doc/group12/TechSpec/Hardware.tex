\section{Hardware}

\begin{figure}[H]
\begin{subfigure}{.45\textwidth}
\centering
\includegraphics[width=.95\textwidth]{DSC_0036.jpg}
\caption{Wheelbase (with old wheels)}
\label{pic:wheelbase}
\end{subfigure}
\begin{subfigure}{.45\textwidth}
\centering
\includegraphics[width=.95\textwidth]{speed_time_ms.png}
\caption{Speed Time profile}
\label{pic:front}
\end{subfigure}
\label{pic:construction}
\end{figure}

\begin{figure}[H]
\begin{subfigure}{.45\textwidth}
\centering
\includegraphics[width=.95\textwidth]{DSC_0149.jpg}
\caption{Front Assembly}
\label{pic:wheelbase}
\end{subfigure}
\begin{subfigure}{.45\textwidth}
\centering
\includegraphics[width=.95\textwidth]{DSC_0151.jpg}
\caption{Wheels as viewed from rear}
\label{pic:front}
\end{subfigure}

\label{pic:construction}
\end{figure}

\subsection{Wheelbase}
\subsubsection{Dimensions}
'Drive' wheelbase:		15cm \newline
Radius of 'turn' wheel: 11cm
\subsubsection{Origin}
The origin is directly between the 'Drive' wheels
\subsubsection{Arrangement}
The robot uses a 3 wheeled 'T' design with 2 parallel 'drive' wheels along one axis of rotation (capable of rotating independently) and a third unpowered 'turn' wheel rotating perpendicular to these 2 (figure 2). The 'origin' of the robot should be 
directly between the 2 drive wheels which are 15cm apart. The 'turn' wheel 
is 11cm back from the origin, the left wheel 7.5cm to the left and the right
7.5cm to the right. 

\subsubsection{Motors}
The 2 drive motors are lego NXT motors and have rotational encoders built in, this is used to turn and move accurately. 
\subsubsection{Wheels}
The wheels at the left and right are large 80mm in diameter ribbed rubber wheels. The wheel at the rear is a large holonomic wheel 64mm in diameter
\subsubsection{Performance}
The performance was measured through the rotary encoders to be:\\
max acceleration(stable):$2.5ms^{-2}$\\
max speed(stable):$1ms^{-1}$ \\
max deceleration (hard brake):$20ms^{-2}$\\
see Figure 1 for profiling\\


\subsubsection{Design Decisions}
The 3 wheeled design was chosen for simplicity and accuracy. The robot does not need to strafe as it is an offensive robot and does not defend the goal, it approaches the ball head on and it shoots head on. The 3 wheeled design requires only 2 motors, which is power efficient, and makes the turning and moving software simple. The 3rd wheel was initially powered but it caused the robot to turn inaccurately as it was difficult to precisely match the speeds of the 3 motors. The 'T' shape made forward movement and mounting the grabbers trivial and gave plenty of room to mount a kicker underneath. Having both powered wheels facing directly in the direction of primary movement gave excellent acceleration and speed.


\subsection{Front Assembly}
\subsubsection{Description}
The robot Has a 2 motor assembly mounted on 4 vertical bars coming up from the struts joining the left and right NXT drive motors. These are symmetrically mounted and linked by a chain in order to keep them synchronised. The right grabber is lower than the left one so that they do not hit into each other. On one of the centre axles there is a rotary encoder to give the position of the grabbers to the arduino, through the rotary encoder board. This allows the grabbers to be opened to a point where they do not hit the wheels, maintain a closed position without constant current and detect when the grabbers will not fully close, implying there is a ball in the way. There is an ultrasound module for automatically avoiding collisions mounted between the motors. 

The grabber assembly is fully detachable and can be clipped on and off. 

\subsubsection{Design Decisions}
The motors were chosen as the shape of them provided good structure for strong mounting. It was decided to use 2 for symmetrical weight distribution. The chain was added after it was found the grabber touching the ball was usually slower and could cause the mechanism to jam when one grabber closed faster.
\\ \\
The rotary encoder was added when it was found to be exceptionally difficult to determine if the ball was in the grabbers, as well as exceptionally difficult to prevent the grabbers hitting the wheels. An added benefit was that the grabbers could keep the ball without a constant current, by powering on if they opened beyond a threshold during movement. 



\subsection{Kicker}
\subsubsection{Position}
The kicker is a solenoid mounted on the underside of the robot (see Figure 4) connected through a relay to the battery packs, with the relay signal going to the power regulator board and being controlled directly by the arduino. On the end of the solenoid is a curved piece of lego designed to keep the ball straight as it pushes it.

\subsubsection{Performance}
Max distance: 3.2m 
Max error (radius of target):15\%


\subsubsection{Design Decisions}
The solenoid kicker was chosen as it took up little space, was reliable and was powerful. With the saving in space longer grabbers could be fitted, making grabbing more reliable. Due to unreliable performance and a lack of space a previous design using motors to drive a kicker was abandoned.


\subsection{Board and Battery Assembly}
\subsubsection{Structure}
The boards are mounted on a platform in the middle of the 3 wheels. The arduino and power
shield are mounted in the centre with 2 battery packs of 2 18650 Li-Ion batteries mounted sideways on either side. The rotary encoder board is
mounted on the back of the right battery pack and the motor driver board is mounted
on the left battery pack. All wires are kept on the inside of the robot.

\subsubsection{Batteries}
The batteries are 4* 18650 Canwelum Li-Ion cells wired in series in 2 battery packs. They can be removed and charged individually in the Li-Ion charger.
	Voltage (per cell):2.65V(min), 3.7(nominal) 4.2V(max)
    Voltage (total)   :10.6V(min), 14.8V(nominal), 16.8V(max)
    Max Current: 7A
    Internal Resistance (per cell): 0.150 Ohms
    Internal Resistance (total)   : 0.6   Ohms
    Capacity: 2250mAh
	Protection: overvolt and undervolt   
    
\subsubsection{Connections}
The batteries are connected in series and power the regulator board, which regulates the voltage to the motors and arduino. The kicker solenoid is powered directly from the power pack. The relay powering the kicker is connected to the arduino pin 6 and ground. The motor and encoder boards are connected to the power shield by I2C wires. 
\subsubsection{Switch}
A yellow switch turns power from the power packs to all parts of the robot on and off.

\subsection{Design Decisions}
The design was subject to much revision, and was changed after encountering specific problems. It was decided to add a switch after trouble stopping the robot when it was out of control, this also helps preserve battery life when not in use. The rotary encoder board and motor board were initially facing out to give easy access to plug things in, however it was found this often caught on other robots and was to vulnerable, so they were made to face inwards. The connections were also originally all removable but this proved to be unreliable and removal was rarely needed to actually remove them so it was decided to solder and heat shrink all the connections permanently.

The batteries in particular were a key revision. The kicker was initially powered from the regulator board but this was found to be not powerful enough and caused the arduino to restart as it drew too much current. The robot also performed inconsistently at first as the batteries discharged (when using the old AA batteries). Testing with the probes found the cause to be the regulator board outputting to low a voltage because the input voltage had dropped to low. This was fixed by using the higher voltage batteries which also have a higher maximum current, allowing them to fully utilise the motors and the solenoid without restarting the arduino. The batteries had the added benefit of cutting off completely for low voltage protection, this allows us to know exactly when to change the batteries. The resulting robot was faster, more consistent and lasted longer. 
